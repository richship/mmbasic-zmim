' Copyright (c) 2019 Thomas Hugo Williams
' For Maximite BASIC v4.5C

' Returns a string representation of the last decoded instruction
Function fmt_op$
  Local i, x$, y$

  x$ = "VAR:"
  If op_num < 3 Then x$ = Str$(op_num) + "OP:"
  x$ = lpad$(Hex$(op_code), 2, "0") + " " + x$ + Str$(op)
  x$ = rpad$(x$, 10)

  For i = 0 To op_num - 1
    If op_type(i) = OT_LARGE_CONST Then
      y$ = " L,"
    ElseIf op_type(i) = OT_SMALL_CONST Then
      y$ = " S,"
    ElseIf op_type(i) = OT_VARIABLE Then
      y$ = " V,"
    Else
      y$ = " O,"
    EndIf

    y$ = y$ + Str$(op_value(i))
    x$ = x$ + rpad$(y$, 8)
  Next i

  fmt_op$ = x$
End Function
